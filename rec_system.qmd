---
title: "rec_system"
format: html
editor: visual
---

```{r}
library(tidyverse)
library(janitor)
```


## Loading Data


```{r}
# url = "https://files.grouplens.org/datasets/movielens/ml-latest-small.zip"
# download.file(url, destfile = "data.zip")
# dir.create("data")
# unzip("data.zip",exdir = "data")   

links <- read_csv("data/ml-latest-small/links.csv") %>% 
  clean_names()

movies <- read_csv("data/ml-latest-small/movies.csv") %>% 
  clean_names()

ratings <- read_csv("data/ml-latest-small/ratings.csv") %>% 
  clean_names()

tags <- read_csv("data/ml-latest-small/tags.csv") %>% 
  clean_names()
```


```{r}
movies2 <- movies %>% 
  separate_rows(genres, sep = "\\|")
```


```{r}
ratings %>% 
  ggplot(aes(x = rating)) +
  geom_bar() +
  theme_bw()
```



```{r}
ratings <- ratings %>% 
  filter(rating != "0")
```


```{r}
ratings_cnt <- ratings %>% 
  group_by(user_id) %>% 
  count()

summary(ratings_cnt$n)
```


```{r}
ratings <- ratings %>% 
  group_by(user_id) %>% 
  filter(n() >= 169)

movies2 <- movies2 %>% 
  filter(movie_id %in% ratings$movie_id) %>% 
  group_by(movie_id) %>% 
  slice(1)
```


```{r}
movies_rating <- ratings %>% 
  group_by(movie_id) %>% 
  summarise(movie_rating = mean(rating)) %>% 
  inner_join(
    movies2,
    by = c("movie_id" = "movie_id")
  )
```


```{r}
# filtering out the top 1000 most popularly rated movies
ratings_cnt <- ratings %>% 
  group_by(movie_id) %>% 
  summarise(ratings_cnt = n()) %>% 
  arrange(desc(ratings_cnt))

movies_rating <- movies_rating %>% 
  filter(movie_id %in% ratings_cnt$movie_id[1:1000])
```



## Content-Based Recommendation System

```{r}
library(cluster)
```


```{r}
movies
```










































